<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    <title>Task Manager</title>
</head>
<body>
<div class="top-panel">
    <div class="logout">
        <button>Log out</button>
    </div>
</div>
<div class="content">
    <div class="columns">
        <div class="white-section">
            <h2 th:text="${userdetail.getUsername()}"></h2>
            <div class="labels">
                <span class="label">My day</span>
                <span class="label">Important</span>
                <span class="label">Planned</span>
                <span class="label">Work</span>
                <span class="label">Personal things</span>
                <span class="label">Done</span>
            </div>
            <div id="calendar" class="calendar"></div>
        </div>
        <div class="gray-section">
            <form action="/add_task" method="post">
                <div class="task-container">
                    <div class="date-style">
                        <p>
                            <span th:text="${#dates.format(#dates.createNow(), 'MMMM d, yyyy')}"></span>
                        </p>
                    </div>
                    <div class="task-input">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <input type="text" id="newTask" name="title" placeholder="New Task" style="width: 70%;">
                        <!-- Dropdown list for labels -->
                        <label for="labelSelect"></label>
                        <select id="labelSelect" name="labels" multiple style="width: 70%;">
                            <option value="Important" style="color: red;">Important</option>
                            <option value="Planned" style="color: orange;">Planned</option>
                            <option value="Work" style="color: blue;">Work</option>
                            <option value="Personal things" style="color: green;">Personal Things</option>
                        </select>
                        <!-- Move the button outside of the task-input div -->
                        <button id="add_task" type="submit">Add Task</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
<script>
    $(document).ready(function() {
        // Initialize multiselect dropdown
        $('#labelSelect').select2({
            placeholder: "Select labels",
            closeOnSelect: false,
            tags: true,
        });

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: ''
            },
            selectable: true,
            selectHelper: true,
            select: function(start, end, allDay) {
                alert('Selected ' + start.format() + ' to ' + end.format());
            }
        });
    });
</script>
</body>
</html>
