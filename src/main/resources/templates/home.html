<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    <title>Task Manager</title>
</head>
<body>
<div class="top-panel">
    <div class="logout">
        <form action="/logout" method="post">
        <button class="logout">Logout</button>
        </form>
    </div>
</div>
<div class="content">
    <div class="columns">
        <div class="white-section">
            <div class="labels">
                <button class="label" th:attr="data-url=@{'/' + ${user.getId()} + '/tasks/all'}">All tasks</button>
                <button class="label" th:attr="data-url=@{'/' +  ${user.getId()} + '/tasks/important'}">Important</button>
                <button class="label" th:attr="data-url=@{'/' +  ${user.getId()} + '/tasks/planned'}">Planned</button>
                <button class="label" th:attr="data-url=@{'/' +  ${user.getId()} + '/tasks/work'}">Work</button>
                <button class="label" th:attr="data-url=@{'/' +  ${user.getId()} + '/tasks/personal_things'}">Personal Things</button>
            </div>
            <div id="calendar" class="calendar"></div>
        </div>
        <div class="gray-section">
            <div class="task-container">
                <div class="date-style">
                    <p>
                        <span th:text="${#dates.format(#dates.createNow(), 'MMMM d, yyyy')}"></span>
                    </p>
                    <h2 class="welcome-message" th:text="'Have a nice day, ' + ${user.getUsername()}"></h2>

<!--            <form action="/add_task" method="post">-->
<!--                <div class="task-container">-->
<!--                    <div class="task-input">-->
<!--                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
<!--                        <input type="text" id="newTask" name="title" placeholder="New Task" style="width: 70%;">-->
<!--                        <label for="labelSelect"></label>-->
<!--                        <select id="labelSelect" name="labels" multiple style="width: 70%;">-->
<!--                            <option value="Important" style="color: red;">Important</option>-->
<!--                            <option value="Planned" style="color: orange;">Planned</option>-->
<!--                            <option value="Work" style="color: blue;">Work</option>-->
<!--                            <option value="Personal things" style="color: green;">Personal Things</option>-->
<!--                        </select>-->
<!--                        <button id="add_task" type="submit">Add Task</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </form>-->
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
<script>
    $(document).ready(function() {
        $('#labelSelect').select2({
            placeholder: "Select labels",
            closeOnSelect: false,
            tags: true,
        });

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: ''
            },
            selectable: true,
            selectHelper: true,
            select: function(start, end, allDay) {
                alert('Selected ' + start.format() + ' to ' + end.format());
            }
        });

        // Click event for labels
        $('.label').click(function() {
            var url = $(this).data('url');
            window.location.href = url;
        });
    });
</script>
</body>
</html>
